name: Build and Deploy Web

on:
  push:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install Ren'Py
        uses: PaxlavaGames/renpy-install@v0.3.0
        with:
          version: "8.2.3"   # или твоя версия Ren'Py (8.1.x / 8.2.x)
          download_web: "yes"

      - name: Build Web
        uses: PaxlavaGames/renpy-web-build@v0.2.0
        with:
          project_dir: "nikitaVspeke"   # имя папки с твоим проектом (game/)

      - name: Setup Pages
        uses: actions/configure-pages@v4

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: './web_build'

      - name: Deploy to GitHub Pages
        uses: actions/deploy-pages@v4
