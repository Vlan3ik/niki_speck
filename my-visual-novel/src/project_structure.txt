C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\app
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\app\root.tsx содержимое:
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\app\SaveManager.tsx содержимое:
// src/app/SaveManager.tsx
import { useEffect } from 'react';
import { useVN } from 'react-visual-novel';
import { useGameStore } from '@/store/useGameStore';

export function SaveManager({ children }: { children: React.ReactNode }) {
  const { sceneId, dialogueIndex } = useVN();

  useEffect(() => {
    // Автосейв при каждом переходе диалога
    localStorage.setItem(
      'auto-save',
      JSON.stringify({ sceneId, dialogueIndex, timestamp: Date.now() })
    );
  }, [sceneId, dialogueIndex]);

  return <>{children}</>;
}C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\app\VisualNovel.tsx содержимое:
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\App.tsx
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\App.tsx содержимое:
// src/App.tsx
import { Game, prepareBranches } from 'react-visual-novel';
import { IntroBranch } from './scenes/IntroBranch';
import { PrologueBranch } from './scenes/PrologueBranch';

// Подготовка всех веток
const branches = prepareBranches({
  intro: IntroBranch,
  prologue: PrologueBranch,
  // сюда потом добавишь day1, bad_end и т.д.
});

type MyBranches = typeof branches;
declare module 'react-visual-novel' {
  interface Branches extends MyBranches {}
}

// Ассеты (можно просто пустой объект, если используешь прямые пути)
const assets = {};

export default function App() {
  return (
    <div className="w-screen h-screen">
      <Game
        assets={assets as any}
        branches={branches}
        initialBranchId="intro"
      />
    </div>
  );
}C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\assets
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\assets\bg
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\assets\characters
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\assets\characters\kein
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\assets\characters\nikita
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\assets\music
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\assets\sfx
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\characters
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\characters\index.ts содержимое:
// src/characters/index.ts
export const characters = {
  nikita: {
    name: "Никита",
    color: "#00ffff",
    sprites: {
      normal: "/assets/characters/nikita/main.png",
      angry: "/assets/characters/nikita/main.png", // пока один спрайт
    },
  },
  kein: {
    name: "Кейн",
    color: "#ff3366",
    sprites: {
      normal: "/assets/characters/kein/main.png",
      smirk: "/assets/characters/kein/main.png",
    },
  },
};C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\components
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\components\CustomChoice.tsx содержимое:
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\components\FadeTransition.tsx содержимое:
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\hooks
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\hooks\useAudio.ts содержимое:
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\index.css
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\index.css содержимое:
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Стили react-visual-novel */
@import 'react-visual-novel/dist/index.css';C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\main.tsx
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\main.tsx содержимое:
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\project_structure.txt
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\scenes
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\scenes\IntroBranch.tsx содержимое:
// src/scenes/IntroBranch.tsx
import { Branch, Scene, Say, Choice, Jump } from 'react-visual-novel';

export function IntroBranch() {
  return (
    <Branch id="intro">
      <Scene src="/assets/bg/menu_bg.png" />

      {/* Логотип */}
      <div className="absolute inset-0 flex items-center justify-center pointer-events-none z-10">
        <img src="/assets/bg/logo.png" alt="Никита Speck" className="w-96 drop-shadow-2xl" />
      </div>

      {/* Музыка (зацикленная) */}
      <audio autoPlay loop volume={0.4}>
        <source src="/assets/music/backgroundMusic.mp3" type="audio/mpeg" />
      </audio>

      <Say>
        <div className="text-8xl font-bold text-red-600 text-center mt-96 drop-shadow-lg">
          НИКИТА SPECK
        </div>
      </Say>

      <Choice
        options={[
          { text: 'НАЧАТЬ ИГРУ', onSelect: () => {} },
          { text: 'ЗАГРУЗИТЬ', onSelect: () => alert('Пока нет сохранений, терпила :)') },
          { text: 'ВЫХОД', onSelect: () => confirm('Точно сваливаешь?') && window.close() },
        ]}
      />

      <Jump branch="prologue" />
    </Branch>
  );
}C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\scenes\PrologueBranch.tsx содержимое:
// src/scenes/PrologueBranch.tsx
import { Branch, Scene, Character, Say, Choice } from 'react-visual-novel';
import { useGameStore } from '@/store/useGameStore';

export function PrologueBranch() {
  const { addAffection } = useGameStore();

  return (
    <Branch id="prologue">
      <Scene src="/assets/bg/menu_bg.png" />

      {/* Никита */}
      <Character
        name="Никита"
        image="/assets/characters/nikita/main.png"
        position="left"
        color="#ff3366"
      />

      <Say name="Никита">
        Блять, опять этот ебаный день в этой помойке под названием школа...
      </Say>

      <Say name="Никита">
        Кому вообще нужна эта хуйня? Лучше бы дома сидел, дрочил на нормальное порно.
      </Say>

      {/* Кейн */}
      <Character
        name="Кейн"
        image="/assets/characters/kein/main.png"
        position="right"
        color="#00ffff"
      />

      <Say name="Кейн">
        О, смотрите-ка, наш любимый долбоёб Никита опять ноет как сука.
      </Say>

      <Say name="Кейн">
        Ты чё, опять всю ночь хуй клал на уроки? Или мамка не высосала?
      </Say>

      <Say name="Никита">
        Заткнись нахуй, Кейн! Ты мне уже в печени сидишь, мразь циановолосая!
      </Say>

      <Say name="Кейн">
        А ты всё так же сосёшь у учителей за оценки, да? Пиздец, Никита, ты просто ходячая спермоприёмница.
      </Say>

      <Choice
        options={[
          {
            text: 'Засадить ему по ебалу прямо тут',
            onSelect: () => addAffection('kein', -30),
          },
          {
            text: 'Сплюнуть и уйти — не тратить нервы',
            onSelect: () => addAffection('kein', -10),
          },
          {
            text: '«Пошли нахуй вместе, Кейн»',
            onSelect: () => addAffection('kein', 25),
          },
        ]}
      />

      <Say name="Никита">
        Ладно... хуй с тобой. Пошли в этот ебаный класс.
      </Say>

      <Say>
        <span className="text-6xl text-red-600">ПРОДОЛЖЕНИЕ СЛЕДУЕТ...</span>
      </Say>
    </Branch>
  );
}C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\store
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\store\useGameStore.ts содержимое:
// src/store/useGameStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

type CharacterAffection = Record<string, number>;

interface GameState {
  // Переменные новеллы
  variables: Record<string, any>;
  affection: CharacterAffection;
  flags: Set<string>;

  // Действия
  setVariable: (key: string, value: any) => void;
  addAffection: (character: string, value: number) => void;
  setFlag: (flag: string) => void;
  hasFlag: (flag: string) => boolean;
  reset: () => void;
}

export const useGameStore = create<GameState>()(
  persist(
    (set, get) => ({
      variables: {},
      affection: {},
      flags: new Set(),

      setVariable: (key, value) =>
        set({ variables: { ...get().variables, [key]: value } }),

      addAffection: (character, value) =>
        set({
          affection: {
            ...get().affection,
            [character]: (get().affection[character] ?? 0) + value,
          },
        }),

      setFlag: (flag) =>
        set({ flags: new Set(get().flags).add(flag) }),

      hasFlag: (flag) => get().flags.has(flag),

      reset: () => set({ variables: {}, affection: {}, flags: new Set() }),
    }),
    {
      name: 'vn-save', // localStorage key
    }
  )
);C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\store\useSaveStore.ts содержимое:
C:\Users\user\Documents\GitHub\niki_speck\my-visual-novel\src\structure.py
